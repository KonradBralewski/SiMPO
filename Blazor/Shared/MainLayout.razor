@using Blazor.Infrastracture.AppSettings;
@inherits LayoutComponentBase

<MudThemeProvider Theme="_customTheme" @bind-IsDarkMode="_isDarkMode"/>
<MudDialogProvider/>
<MudSnackbarProvider/>
<MudBreakpointProvider/>


<MudLayout>
    <MudAppBar Class="p-0 m-0" Style="max-height: fit-content;" Elevation="4" Color="Color.Secondary">
        <NavMenu ToggleDarkMode="@ToggleDarkMode" IsDarkMode="@_isDarkMode"/>
    </MudAppBar>
    <MudMainContent Style="width: 100%; min-height: 100vh; max-height: fit-content; overflow-x: clip;">
        <SmallDeviceNavMenu/>
        <CascadingValue Value="@_appSettingsProvider">
            @Body
        </CascadingValue>
        @if(_appState.IsApplicationWaiting())
        {
             @*SM BREAKPOINT*@ 
            <MudProgressCircular Color="Color.Secondary" Indeterminate="true" Class="absolute ml-auto mr-auto d-sm-none"
                Style="width: 150px; height: 150px; left: 0; right: 0; top: 35%; margin-top: 125px;" StrokeWidth="10"/>
            @*SM BREAKPOINT*@
            @*SM+ BREAKPOINT*@
            <MudProgressCircular Color="Color.Secondary" Indeterminate="true" 
                Class="d-none d-sm-block absolute ml-auto mr-auto mt-15"
                Style="width: 150px; height: 150px; left: 0; right: 0; top: 35%;" StrokeWidth="10" />
            @*SM+ BREAKPOINT*@            
        }
    </MudMainContent>
    <Footer/>
</MudLayout>